const thumbnail_path=root+"assets/images/cartes/thumbnails/",CardPool={main:null,modal:null,cards:[],init:async function(){this.modal=new CardModal,this.main=query("main"),Brainstorm.getCards().then((e=>{e.success?(this.cards=e.rows,this.container=create("article"),this.container.replaceChildren(this.renderCards()),this.main.replaceChildren(this.container)):MessageModal.alert(e.errmsg,(()=>{document.location.href=root}))}))},renderCards:function(){const e=create("div","card-grid");return this.cards.forEach(((t,r)=>{e.append(this.renderCard(t))})),e},renderCard:function(e){let t=e.type;e.supertype&&(t=e.supertype+" "+t),e.subtype&&(t=t+" - "+e.subtype);let r=null,a=null,i=null;e.image&&(e.image.webp_small&&(r=thumbnail_path+e.image.webp_small),e.image.webp_medium&&(a=thumbnail_path+e.image.webp_medium),e.image.webp_large&&(i=thumbnail_path+e.image.webp_large)),e.computed={name:e.name,legend:t,thumb_small:r,thumb_medium:a,thumb_large:i};const d=create("div","card-grid__item"),s=d.create("div","card-grid__item__icon");e.computed.thumb_small&&(s.style.backgroundImage="url("+e.computed.thumb_small+")");const n=d.create("div","card-grid__item__details");n.create("div","card-grid__item__details__name",e.name);const l=n.create("div","card-grid__item__details__description");return l.create("div","card-grid__item__details__description__legend",e.computed.legend),l.create("div","card-grid__item__details__description__power_toughness",e.power+"/"+e.toughness),l.create("div","card-grid__item__details__description__cost",this.renderSymbols(e.cost)),d.addEventListener("click",(t=>{console.log(e)})),d},renderSymbols:function(e){let t="";return[...String(e).matchAll(/\{(.*?)\}/g)].map((e=>e[1])).forEach((e=>{t+=`<div class="symbol-1rem icon-${e}"></div>`})),t}};class CardModal extends Modal{form=null;clb=null;constructor(){let e=create("form","email-modal");e.innerHTML="",super(e),this.form=e}show(e=null){this.clb=e,super.show()}cancel(){this.hide()}}